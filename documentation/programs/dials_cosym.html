

<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>dials.cosym &#8212; DIALS  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=12dfc556" />
    <link rel="stylesheet" href="../../_static/dials-styles.css" type="text/css" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="icon" href="../../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="dials.symmetry" href="dials_symmetry.html" />
    <link rel="prev" title="dials.two_theta_refine" href="dials_two_theta_refine.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="logoheader container">
  <a href="../../index.html">
  <img class="logoheader" alt="DIALS" src="../../_static/dials_header.png" />
  </a>
  </div>
  

  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="dials-cosym">
<h1>dials.cosym<a class="headerlink" href="#dials-cosym" title="Link to this heading">¶</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>This program implements the methods of <a class="reference external" href="https://doi.org/10.1107/S2059798318002978">Gildea, R. J. &amp; Winter, G. (2018).
Acta Cryst. D74, 405-410</a> for
determination of Patterson group symmetry from sparse multi-crystal data sets in
the presence of an indexing ambiguity.</p>
<p>The program takes as input a set of integrated experiments and reflections,
either in one file per experiment, or with all experiments combined in a single
models.expt and observations.refl file. It will perform analysis of the
symmetry elements present in the datasets and, if necessary, reindex experiments
and reflections as necessary to ensure that all output experiments and
reflections are indexed consistently.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dials</span><span class="o">.</span><span class="n">cosym</span> <span class="n">models</span><span class="o">.</span><span class="n">expt</span> <span class="n">observations</span><span class="o">.</span><span class="n">refl</span>

<span class="n">dials</span><span class="o">.</span><span class="n">cosym</span> <span class="n">models</span><span class="o">.</span><span class="n">expt</span> <span class="n">observations</span><span class="o">.</span><span class="n">refl</span> <span class="n">space_group</span><span class="o">=</span><span class="n">I23</span>

<span class="n">dials</span><span class="o">.</span><span class="n">cosym</span> <span class="n">models</span><span class="o">.</span><span class="n">expt</span> <span class="n">observations</span><span class="o">.</span><span class="n">refl</span> <span class="n">space_group</span><span class="o">=</span><span class="n">I23</span> <span class="n">lattice_group</span><span class="o">=</span><span class="n">I23</span>
</pre></div>
</div>
</section>
<section id="basic-parameters">
<h2>Basic parameters<a class="headerlink" href="#basic-parameters" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">partiality_threshold</span> <span class="o">=</span> <span class="mf">0.4</span>
<span class="n">unit_cell_clustering</span> <span class="p">{</span>
  <span class="n">threshold</span> <span class="o">=</span> <span class="mi">5000</span>
  <span class="n">log</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">}</span>
<span class="n">reference_model</span> <span class="p">{</span>
<span class="p">}</span>
<span class="n">normalisation</span> <span class="o">=</span> <span class="n">kernel</span> <span class="n">quasi</span> <span class="o">*</span><span class="n">ml_iso</span> <span class="n">ml_aniso</span>
<span class="n">d_min</span> <span class="o">=</span> <span class="n">Auto</span>
<span class="n">min_i_mean_over_sigma_mean</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">min_cc_half</span> <span class="o">=</span> <span class="mf">0.6</span>
<span class="n">lattice_group</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">space_group</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">lattice_symmetry_max_delta</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="n">best_monoclinic_beta</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">dimensions</span> <span class="o">=</span> <span class="n">Auto</span>
<span class="n">use_curvatures</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">weights</span> <span class="o">=</span> <span class="n">count</span> <span class="n">standard_error</span>
<span class="n">cc_weights</span> <span class="o">=</span> <span class="kc">None</span> <span class="n">sigma</span>
<span class="n">min_pairs</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">minimization</span> <span class="p">{</span>
  <span class="n">engine</span> <span class="o">=</span> <span class="o">*</span><span class="n">scitbx</span> <span class="n">scipy</span>
  <span class="n">max_iterations</span> <span class="o">=</span> <span class="mi">100</span>
  <span class="n">max_calls</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">}</span>
<span class="n">nproc</span> <span class="o">=</span> <span class="n">Auto</span>
<span class="n">relative_length_tolerance</span> <span class="o">=</span> <span class="mf">0.05</span>
<span class="n">absolute_angle_tolerance</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">min_reflections</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">seed</span> <span class="o">=</span> <span class="mi">230</span>
<span class="n">output</span> <span class="p">{</span>
  <span class="n">suffix</span> <span class="o">=</span> <span class="s2">&quot;_reindexed&quot;</span>
  <span class="n">log</span> <span class="o">=</span> <span class="n">dials</span><span class="o">.</span><span class="n">cosym</span><span class="o">.</span><span class="n">log</span>
  <span class="n">experiments</span> <span class="o">=</span> <span class="s2">&quot;symmetrized.expt&quot;</span>
  <span class="n">reflections</span> <span class="o">=</span> <span class="s2">&quot;symmetrized.refl&quot;</span>
  <span class="n">json</span> <span class="o">=</span> <span class="n">dials</span><span class="o">.</span><span class="n">cosym</span><span class="o">.</span><span class="n">json</span>
  <span class="n">html</span> <span class="o">=</span> <span class="n">dials</span><span class="o">.</span><span class="n">cosym</span><span class="o">.</span><span class="n">html</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Link to this heading">¶</a></h2>
<p>Run <code class="docutils literal notranslate"><span class="pre">dials.cosym</span></code>, providing the integrated experiment (<code class="docutils literal notranslate"><span class="pre">.expt</span></code>) and reflection (<code class="docutils literal notranslate"><span class="pre">.refl</span></code>)
files as input:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dials</span><span class="o">.</span><span class="n">cosym</span> <span class="n">experiments_0</span><span class="o">.</span><span class="n">expt</span> <span class="n">experiments_1</span><span class="o">.</span><span class="n">expt</span> <span class="n">experiments_2</span><span class="o">.</span><span class="n">expt</span> <span class="n">experiments_3</span><span class="o">.</span><span class="n">expt</span> <span class="n">reflections_0</span><span class="o">.</span><span class="n">refl</span> <span class="n">reflections_1</span><span class="o">.</span><span class="n">refl</span> <span class="n">reflections_2</span><span class="o">.</span><span class="n">refl</span> <span class="n">reflections_3</span><span class="o">.</span><span class="n">refl</span>
</pre></div>
</div>
<p>The first step is to analyse the metric symmetry of the input unit cells, and perform
hierarchical unit cell clustering to identify any outlier datasets that aren’t consistent
with the rest of the datasets. The largest common cluster is carried forward in the
analysis. You can modify the threshold that is used for determining outliers by setting
the <code class="docutils literal notranslate"><span class="pre">unit_cell_clustering.threshold</span></code> parameter.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Using</span> <span class="n">Andrews</span><span class="o">-</span><span class="n">Bernstein</span> <span class="n">distance</span> <span class="kn">from</span> <span class="nn">Andrews</span> <span class="o">&amp;</span> <span class="n">Bernstein</span> <span class="n">J</span> <span class="n">Appl</span> <span class="n">Cryst</span> <span class="mi">47</span><span class="p">:</span><span class="mi">346</span> <span class="p">(</span><span class="mi">2014</span><span class="p">)</span>
<span class="n">Distances</span> <span class="n">have</span> <span class="n">been</span> <span class="n">calculated</span>
<span class="mi">0</span> <span class="n">singletons</span><span class="p">:</span>

<span class="n">Point</span> <span class="n">group</span>    <span class="n">a</span>           <span class="n">b</span>           <span class="n">c</span>          <span class="n">alpha</span>        <span class="n">beta</span>         <span class="n">gamma</span>       


<span class="mi">1</span> <span class="n">cluster</span>

<span class="n">Cluster_id</span>       <span class="n">N_xtals</span>  <span class="n">Med_a</span>         <span class="n">Med_b</span>         <span class="n">Med_c</span>         <span class="n">Med_alpha</span>    <span class="n">Med_beta</span>     <span class="n">Med_gamma</span>   <span class="n">Delta</span><span class="p">(</span><span class="n">deg</span><span class="p">)</span>
<span class="mi">4</span> <span class="ow">in</span> <span class="n">P</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mf">2.</span>
<span class="n">cluster_1</span>        <span class="mi">4</span>        <span class="mf">68.36</span> <span class="p">(</span><span class="mf">0.01</span> <span class="p">)</span> <span class="mf">68.36</span> <span class="p">(</span><span class="mf">0.01</span> <span class="p">)</span> <span class="mf">103.95</span><span class="p">(</span><span class="mf">0.02</span> <span class="p">)</span> <span class="mf">90.00</span> <span class="p">(</span><span class="mf">0.00</span><span class="p">)</span> <span class="mf">90.00</span> <span class="p">(</span><span class="mf">0.00</span><span class="p">)</span> <span class="mf">90.00</span> <span class="p">(</span><span class="mf">0.00</span><span class="p">)</span>
     <span class="n">P</span> <span class="mi">4</span><span class="o">/</span><span class="n">m</span> <span class="n">m</span> <span class="n">m</span> <span class="p">(</span><span class="n">No</span><span class="o">.</span> <span class="mi">123</span><span class="p">)</span>  <span class="mf">68.36</span>         <span class="mf">68.36</span>         <span class="mf">103.95</span>        <span class="mf">90.00</span>        <span class="mf">90.00</span>        <span class="mf">90.00</span>         <span class="mf">0.0</span>   
<span class="n">Standard</span> <span class="n">deviations</span> <span class="n">are</span> <span class="ow">in</span> <span class="n">brackets</span><span class="o">.</span>
<span class="n">Each</span> <span class="n">cluster</span><span class="p">:</span>
        <span class="n">Input</span> <span class="n">lattice</span> <span class="n">count</span><span class="p">,</span> <span class="k">with</span> <span class="n">integration</span> <span class="n">Bravais</span> <span class="n">setting</span> <span class="n">space</span> <span class="n">group</span><span class="o">.</span>
        <span class="n">Cluster</span> <span class="n">median</span> <span class="k">with</span> <span class="n">Niggli</span> <span class="n">cell</span> <span class="n">parameters</span> <span class="p">(</span><span class="n">std</span> <span class="n">dev</span> <span class="ow">in</span> <span class="n">brackets</span><span class="p">)</span><span class="o">.</span>
        <span class="n">Highest</span> <span class="n">possible</span> <span class="n">metric</span> <span class="n">symmetry</span> <span class="ow">and</span> <span class="n">unit</span> <span class="n">cell</span> <span class="n">using</span> <span class="n">LePage</span> <span class="p">(</span><span class="n">J</span> <span class="n">Appl</span> <span class="n">Cryst</span> <span class="mi">1982</span><span class="p">,</span> <span class="mi">15</span><span class="p">:</span><span class="mi">255</span><span class="p">)</span> <span class="n">method</span><span class="p">,</span> <span class="n">maximum</span> <span class="n">delta</span> <span class="mi">3</span><span class="n">deg</span><span class="o">.</span>
</pre></div>
</div>
<p>In this case, the unit cell analysis found 1 cluster of 4 datasets in <span class="math notranslate nohighlight">\(P\,4\,2\,2\)</span>.
As a result, all datasets will be carried forward for symmetry analysis.</p>
<p>Each dataset is then normalised using maximum likelihood isotropic Wilson scaling,
reporting an estimated Wilson <span class="math notranslate nohighlight">\(B\)</span> value and scale factor for each dataset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Normalising</span> <span class="n">intensities</span> <span class="k">for</span> <span class="n">dataset</span> <span class="mi">1</span>

<span class="n">ML</span> <span class="n">estimate</span> <span class="n">of</span> <span class="n">overall</span> <span class="n">B</span> <span class="n">value</span><span class="p">:</span>
   <span class="mf">13.52</span> <span class="n">A</span><span class="o">**</span><span class="mi">2</span>
<span class="n">ML</span> <span class="n">estimate</span> <span class="n">of</span>  <span class="o">-</span><span class="n">log</span> <span class="n">of</span> <span class="n">scale</span> <span class="n">factor</span><span class="p">:</span>
  <span class="o">-</span><span class="mf">3.04</span>

<span class="o">--------------------------------------------------------------------------------</span>

<span class="n">Normalising</span> <span class="n">intensities</span> <span class="k">for</span> <span class="n">dataset</span> <span class="mi">2</span>

<span class="n">ML</span> <span class="n">estimate</span> <span class="n">of</span> <span class="n">overall</span> <span class="n">B</span> <span class="n">value</span><span class="p">:</span>
   <span class="mf">11.06</span> <span class="n">A</span><span class="o">**</span><span class="mi">2</span>
<span class="n">ML</span> <span class="n">estimate</span> <span class="n">of</span>  <span class="o">-</span><span class="n">log</span> <span class="n">of</span> <span class="n">scale</span> <span class="n">factor</span><span class="p">:</span>
  <span class="o">-</span><span class="mf">3.50</span>

<span class="o">--------------------------------------------------------------------------------</span>

<span class="n">Normalising</span> <span class="n">intensities</span> <span class="k">for</span> <span class="n">dataset</span> <span class="mi">3</span>

<span class="n">ML</span> <span class="n">estimate</span> <span class="n">of</span> <span class="n">overall</span> <span class="n">B</span> <span class="n">value</span><span class="p">:</span>
   <span class="mf">11.38</span> <span class="n">A</span><span class="o">**</span><span class="mi">2</span>
<span class="n">ML</span> <span class="n">estimate</span> <span class="n">of</span>  <span class="o">-</span><span class="n">log</span> <span class="n">of</span> <span class="n">scale</span> <span class="n">factor</span><span class="p">:</span>
  <span class="o">-</span><span class="mf">2.96</span>

<span class="o">--------------------------------------------------------------------------------</span>

<span class="n">Normalising</span> <span class="n">intensities</span> <span class="k">for</span> <span class="n">dataset</span> <span class="mi">4</span>

<span class="n">ML</span> <span class="n">estimate</span> <span class="n">of</span> <span class="n">overall</span> <span class="n">B</span> <span class="n">value</span><span class="p">:</span>
   <span class="mf">12.14</span> <span class="n">A</span><span class="o">**</span><span class="mi">2</span>
<span class="n">ML</span> <span class="n">estimate</span> <span class="n">of</span>  <span class="o">-</span><span class="n">log</span> <span class="n">of</span> <span class="n">scale</span> <span class="n">factor</span><span class="p">:</span>
  <span class="o">-</span><span class="mf">2.67</span>
</pre></div>
</div>
<p>A high resolution cutoff is then determined by analysis of CC½ and &lt;I&gt;/&lt;σ(I)&gt; as a
function of resolution:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Estimation of resolution for Laue group analysis

Removing 3 Wilson outliers with E^2 &gt;= 16.0
Resolution estimate from &lt;I&gt;/&lt;σ(I)&gt; &gt; 4.0 : 2.16
Resolution estimate from CC½ &gt; 0.60: 1.80
High resolution limit set to: 1.80
Selecting 148799 reflections with d &gt; 1.80
</pre></div>
</div>
<p>Next, the program performs automatic determination of the number of dimensions for
analysis. This calculates the functional of equation 2 of
<a class="reference external" href="https://doi.org/10.1107/S2059798318002978">Gildea, R. J. &amp; Winter, G. (2018)</a> for each dimension from 2 up to the number of
symmetry operations in the lattice group. The analysis needs to use sufficient
dimensions to be able to separate any indexing ambiguities that may be present, but
using too many dimensions reduces the sensitivity of the procedure. In this case, it is
determined that 8 dimensions will be used for the analysis:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Automatic</span> <span class="n">determination</span> <span class="n">of</span> <span class="n">number</span> <span class="n">of</span> <span class="n">dimensions</span> <span class="k">for</span> <span class="n">analysis</span>
<span class="o">+--------------+--------------+</span>
<span class="o">|</span>   <span class="n">Dimensions</span> <span class="o">|</span>   <span class="n">Functional</span> <span class="o">|</span>
<span class="o">|--------------+--------------|</span>
<span class="o">|</span>            <span class="mi">1</span> <span class="o">|</span>      <span class="mf">14.7478</span> <span class="o">|</span>
<span class="o">|</span>            <span class="mi">2</span> <span class="o">|</span>      <span class="mf">15.8545</span> <span class="o">|</span>
<span class="o">|</span>            <span class="mi">3</span> <span class="o">|</span>      <span class="mf">14.5975</span> <span class="o">|</span>
<span class="o">|</span>            <span class="mi">4</span> <span class="o">|</span>      <span class="mf">14.9222</span> <span class="o">|</span>
<span class="o">|</span>            <span class="mi">5</span> <span class="o">|</span>      <span class="mf">15.3241</span> <span class="o">|</span>
<span class="o">|</span>            <span class="mi">6</span> <span class="o">|</span>      <span class="mf">14.8896</span> <span class="o">|</span>
<span class="o">|</span>            <span class="mi">7</span> <span class="o">|</span>      <span class="mf">15.2194</span> <span class="o">|</span>
<span class="o">|</span>            <span class="mi">8</span> <span class="o">|</span>      <span class="mf">14.8325</span> <span class="o">|</span>
<span class="o">+--------------+--------------+</span>
<span class="n">Best</span> <span class="n">number</span> <span class="n">of</span> <span class="n">dimensions</span><span class="p">:</span> <span class="mi">7</span>
</pre></div>
</div>
<p>Once the analysis has been performed in the appropriate number of dimensions, the
results are analysed to score all possible symmetry elements, using algorithms similar
to those of <a class="reference external" href="https://doi.org/10.1107/S090744491003982X">POINTLESS</a>, using the fact that the angles between vectors represent
genuine systematic differences between datasets, as made clear by equation 5 of
<a class="reference external" href="https://doi.org/10.1107/S2059798317000699">Diederichs, K. (2017)</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Scoring</span> <span class="n">individual</span> <span class="n">symmetry</span> <span class="n">elements</span>
<span class="o">+--------------+--------+------+-----+-----------------+</span>
<span class="o">|</span>   <span class="n">likelihood</span> <span class="o">|</span>   <span class="n">Z</span><span class="o">-</span><span class="n">CC</span> <span class="o">|</span>   <span class="n">CC</span> <span class="o">|</span>     <span class="o">|</span> <span class="n">Operator</span>        <span class="o">|</span>
<span class="o">|--------------+--------+------+-----+-----------------|</span>
<span class="o">|</span>        <span class="mf">0.933</span> <span class="o">|</span>   <span class="mf">9.69</span> <span class="o">|</span> <span class="mf">0.97</span> <span class="o">|</span> <span class="o">***</span> <span class="o">|</span> <span class="mi">4</span> <span class="o">|</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>    <span class="o">|</span>
<span class="o">|</span>        <span class="mf">0.934</span> <span class="o">|</span>   <span class="mf">9.7</span>  <span class="o">|</span> <span class="mf">0.97</span> <span class="o">|</span> <span class="o">***</span> <span class="o">|</span> <span class="mi">4</span><span class="o">^-</span><span class="mi">1</span> <span class="o">|</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">|</span>
<span class="o">|</span>        <span class="mf">0.934</span> <span class="o">|</span>   <span class="mf">9.7</span>  <span class="o">|</span> <span class="mf">0.97</span> <span class="o">|</span> <span class="o">***</span> <span class="o">|</span> <span class="mi">2</span> <span class="o">|</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="o">|</span>
<span class="o">|</span>        <span class="mf">0.932</span> <span class="o">|</span>   <span class="mf">9.68</span> <span class="o">|</span> <span class="mf">0.97</span> <span class="o">|</span> <span class="o">***</span> <span class="o">|</span> <span class="mi">2</span> <span class="o">|</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="o">|</span>
<span class="o">|</span>        <span class="mf">0.936</span> <span class="o">|</span>   <span class="mf">9.74</span> <span class="o">|</span> <span class="mf">0.97</span> <span class="o">|</span> <span class="o">***</span> <span class="o">|</span> <span class="mi">2</span> <span class="o">|</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>    <span class="o">|</span>
<span class="o">|</span>        <span class="mf">0.936</span> <span class="o">|</span>   <span class="mf">9.74</span> <span class="o">|</span> <span class="mf">0.97</span> <span class="o">|</span> <span class="o">***</span> <span class="o">|</span> <span class="mi">2</span> <span class="o">|</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="o">|</span>
<span class="o">|</span>        <span class="mf">0.934</span> <span class="o">|</span>   <span class="mf">9.7</span>  <span class="o">|</span> <span class="mf">0.97</span> <span class="o">|</span> <span class="o">***</span> <span class="o">|</span> <span class="mi">2</span> <span class="o">|</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>   <span class="o">|</span>
<span class="o">+--------------+--------+------+-----+-----------------+</span>
</pre></div>
</div>
<p>Scores for the possible Laue groups are obtained by analysing the scores for the
symmetry elements that are present or absent from each group, and the groups are ranked
by their likelihood.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Scoring</span> <span class="nb">all</span> <span class="n">possible</span> <span class="n">sub</span><span class="o">-</span><span class="n">groups</span>
<span class="o">+-------------------+-----+--------------+----------+--------+--------+---------+--------------------+</span>
<span class="o">|</span> <span class="n">Patterson</span> <span class="n">group</span>   <span class="o">|</span>     <span class="o">|</span>   <span class="n">Likelihood</span> <span class="o">|</span>   <span class="n">NetZcc</span> <span class="o">|</span>   <span class="n">Zcc</span><span class="o">+</span> <span class="o">|</span>   <span class="n">Zcc</span><span class="o">-</span> <span class="o">|</span>   <span class="n">delta</span> <span class="o">|</span> <span class="n">Reindex</span> <span class="n">operator</span>   <span class="o">|</span>
<span class="o">|-------------------+-----+--------------+----------+--------+--------+---------+--------------------|</span>
<span class="o">|</span> <span class="n">P</span> <span class="mi">4</span><span class="o">/</span><span class="n">m</span> <span class="n">m</span> <span class="n">m</span>         <span class="o">|</span> <span class="o">***</span> <span class="o">|</span>            <span class="mi">1</span> <span class="o">|</span>     <span class="mf">9.71</span> <span class="o">|</span>   <span class="mf">9.71</span> <span class="o">|</span>   <span class="mi">0</span>    <span class="o">|</span>       <span class="mi">0</span> <span class="o">|</span> <span class="o">-</span><span class="n">a</span><span class="p">,</span><span class="o">-</span><span class="n">b</span><span class="p">,</span><span class="n">c</span>            <span class="o">|</span>
<span class="o">|</span> <span class="n">C</span> <span class="n">m</span> <span class="n">m</span> <span class="n">m</span>           <span class="o">|</span>     <span class="o">|</span>            <span class="mi">0</span> <span class="o">|</span>     <span class="mf">0.03</span> <span class="o">|</span>   <span class="mf">9.72</span> <span class="o">|</span>   <span class="mf">9.69</span> <span class="o">|</span>       <span class="mi">0</span> <span class="o">|</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">,</span><span class="o">-</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">,</span><span class="n">c</span>         <span class="o">|</span>
<span class="o">|</span> <span class="n">P</span> <span class="mi">4</span><span class="o">/</span><span class="n">m</span>             <span class="o">|</span>     <span class="o">|</span>            <span class="mi">0</span> <span class="o">|</span>     <span class="mf">0.01</span> <span class="o">|</span>   <span class="mf">9.71</span> <span class="o">|</span>   <span class="mf">9.7</span>  <span class="o">|</span>       <span class="mi">0</span> <span class="o">|</span> <span class="o">-</span><span class="n">a</span><span class="p">,</span><span class="o">-</span><span class="n">b</span><span class="p">,</span><span class="n">c</span>            <span class="o">|</span>
<span class="o">|</span> <span class="n">P</span> <span class="n">m</span> <span class="n">m</span> <span class="n">m</span>           <span class="o">|</span>     <span class="o">|</span>            <span class="mi">0</span> <span class="o">|</span>    <span class="o">-</span><span class="mi">0</span>    <span class="o">|</span>   <span class="mf">9.71</span> <span class="o">|</span>   <span class="mf">9.71</span> <span class="o">|</span>       <span class="mi">0</span> <span class="o">|</span> <span class="o">-</span><span class="n">a</span><span class="p">,</span><span class="o">-</span><span class="n">b</span><span class="p">,</span><span class="n">c</span>            <span class="o">|</span>
<span class="o">|</span> <span class="n">P</span> <span class="mi">1</span> <span class="mi">2</span><span class="o">/</span><span class="n">m</span> <span class="mi">1</span>         <span class="o">|</span>     <span class="o">|</span>            <span class="mi">0</span> <span class="o">|</span>     <span class="mf">0.04</span> <span class="o">|</span>   <span class="mf">9.74</span> <span class="o">|</span>   <span class="mf">9.7</span>  <span class="o">|</span>       <span class="mi">0</span> <span class="o">|</span> <span class="o">-</span><span class="n">a</span><span class="p">,</span><span class="o">-</span><span class="n">c</span><span class="p">,</span><span class="o">-</span><span class="n">b</span>           <span class="o">|</span>
<span class="o">|</span> <span class="n">C</span> <span class="mi">1</span> <span class="mi">2</span><span class="o">/</span><span class="n">m</span> <span class="mi">1</span>         <span class="o">|</span>     <span class="o">|</span>            <span class="mi">0</span> <span class="o">|</span>     <span class="mf">0.04</span> <span class="o">|</span>   <span class="mf">9.74</span> <span class="o">|</span>   <span class="mf">9.7</span>  <span class="o">|</span>       <span class="mi">0</span> <span class="o">|</span> <span class="n">a</span><span class="o">-</span><span class="n">b</span><span class="p">,</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">,</span><span class="n">c</span>          <span class="o">|</span>
<span class="o">|</span> <span class="n">P</span> <span class="mi">1</span> <span class="mi">2</span><span class="o">/</span><span class="n">m</span> <span class="mi">1</span>         <span class="o">|</span>     <span class="o">|</span>            <span class="mi">0</span> <span class="o">|</span>    <span class="o">-</span><span class="mi">0</span>    <span class="o">|</span>   <span class="mf">9.7</span>  <span class="o">|</span>   <span class="mf">9.71</span> <span class="o">|</span>       <span class="mi">0</span> <span class="o">|</span> <span class="o">-</span><span class="n">b</span><span class="p">,</span><span class="o">-</span><span class="n">a</span><span class="p">,</span><span class="o">-</span><span class="n">c</span>           <span class="o">|</span>
<span class="o">|</span> <span class="n">C</span> <span class="mi">1</span> <span class="mi">2</span><span class="o">/</span><span class="n">m</span> <span class="mi">1</span>         <span class="o">|</span>     <span class="o">|</span>            <span class="mi">0</span> <span class="o">|</span>    <span class="o">-</span><span class="mf">0.01</span> <span class="o">|</span>   <span class="mf">9.7</span>  <span class="o">|</span>   <span class="mf">9.71</span> <span class="o">|</span>       <span class="mi">0</span> <span class="o">|</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">,</span><span class="o">-</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">,</span><span class="n">c</span>         <span class="o">|</span>
<span class="o">|</span> <span class="n">P</span> <span class="mi">1</span> <span class="mi">2</span><span class="o">/</span><span class="n">m</span> <span class="mi">1</span>         <span class="o">|</span>     <span class="o">|</span>            <span class="mi">0</span> <span class="o">|</span>    <span class="o">-</span><span class="mf">0.04</span> <span class="o">|</span>   <span class="mf">9.68</span> <span class="o">|</span>   <span class="mf">9.71</span> <span class="o">|</span>       <span class="mi">0</span> <span class="o">|</span> <span class="o">-</span><span class="n">a</span><span class="p">,</span><span class="o">-</span><span class="n">b</span><span class="p">,</span><span class="n">c</span>            <span class="o">|</span>
<span class="o">|</span> <span class="n">P</span> <span class="o">-</span><span class="mi">1</span>              <span class="o">|</span>     <span class="o">|</span>            <span class="mi">0</span> <span class="o">|</span>    <span class="o">-</span><span class="mf">9.71</span> <span class="o">|</span>   <span class="mi">0</span>    <span class="o">|</span>   <span class="mf">9.71</span> <span class="o">|</span>       <span class="mi">0</span> <span class="o">|</span> <span class="o">-</span><span class="n">a</span><span class="p">,</span><span class="o">-</span><span class="n">b</span><span class="p">,</span><span class="n">c</span>            <span class="o">|</span>
<span class="o">+-------------------+-----+--------------+----------+--------+--------+---------+--------------------+</span>
<span class="n">Best</span> <span class="n">solution</span><span class="p">:</span> <span class="n">P</span> <span class="mi">4</span><span class="o">/</span><span class="n">m</span> <span class="n">m</span> <span class="n">m</span>
<span class="n">Unit</span> <span class="n">cell</span><span class="p">:</span> <span class="mf">68.360</span><span class="p">,</span> <span class="mf">68.360</span><span class="p">,</span> <span class="mf">103.953</span><span class="p">,</span> <span class="mf">90.000</span><span class="p">,</span> <span class="mf">90.000</span><span class="p">,</span> <span class="mf">90.000</span>
<span class="n">Reindex</span> <span class="n">operator</span><span class="p">:</span> <span class="o">-</span><span class="n">a</span><span class="p">,</span><span class="o">-</span><span class="n">b</span><span class="p">,</span><span class="n">c</span>
<span class="n">Laue</span> <span class="n">group</span> <span class="n">probability</span><span class="p">:</span> <span class="mf">1.000</span>
<span class="n">Laue</span> <span class="n">group</span> <span class="n">confidence</span><span class="p">:</span> <span class="mf">1.000</span>
</pre></div>
</div>
<p>The program then concludes by reporting any reindexing operations that are necessary to
ensure consistent indexing between datasets. In this case, no indexing ambiguity is
present, so the reindexing operator is simply the identity operator for all datasets.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Reindexing</span> <span class="n">operators</span><span class="p">:</span>
<span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<p>The correctly reindexed experiments and reflections are then saved to file, along with
a <a class="reference external" href="https://dials.github.io/tutorial_data/master/multi_crystal/dials.cosym.html">HTML report</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Writing</span> <span class="n">html</span> <span class="n">report</span> <span class="n">to</span><span class="p">:</span> <span class="n">dials</span><span class="o">.</span><span class="n">cosym</span><span class="o">.</span><span class="n">html</span>
<span class="n">Writing</span> <span class="n">json</span> <span class="n">to</span><span class="p">:</span> <span class="n">dials</span><span class="o">.</span><span class="n">cosym</span><span class="o">.</span><span class="n">json</span>
<span class="n">Saving</span> <span class="n">reindexed</span> <span class="n">experiments</span> <span class="n">to</span> <span class="n">symmetrized</span><span class="o">.</span><span class="n">expt</span>
<span class="n">Saving</span> <span class="n">reindexed</span> <span class="n">reflections</span> <span class="n">to</span> <span class="n">symmetrized</span><span class="o">.</span><span class="n">refl</span>
</pre></div>
</div>
<p>The full log file can be viewed here:</p>
<div class="toggle docutils container">
<div class="header docutils container">
<p><strong>Show/Hide Log</strong></p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>DIALS 3.dev.1120-g9af1ec126
The following parameters have been modified:

input {
  experiments = experiments_0.expt
  experiments = experiments_1.expt
  experiments = experiments_2.expt
  experiments = experiments_3.expt
  reflections = reflections_0.refl
  reflections = reflections_1.refl
  reflections = reflections_2.refl
  reflections = reflections_3.refl
}

Using Andrews-Bernstein distance from Andrews &amp; Bernstein J Appl Cryst 47:346 (2014)
Distances have been calculated
0 singletons:

Point group    a           b           c          alpha        beta         gamma       


1 cluster

Cluster_id       N_xtals  Med_a         Med_b         Med_c         Med_alpha    Med_beta     Med_gamma   Delta(deg)
4 in P 4 2 2.
cluster_1        4        68.36 (0.01 ) 68.36 (0.01 ) 103.95(0.02 ) 90.00 (0.00) 90.00 (0.00) 90.00 (0.00)
     P 4/m m m (No. 123)  68.36         68.36         103.95        90.00        90.00        90.00         0.0   
Standard deviations are in brackets.
Each cluster:
        Input lattice count, with integration Bravais setting space group.
        Cluster median with Niggli cell parameters (std dev in brackets).
        Highest possible metric symmetry and unit cell using LePage (J Appl Cryst 1982, 15:255) method, maximum delta 3deg.
Mapping all input cells to a common minimum cell
Filtering reflections for dataset 0
Read 76079 predicted reflections
Selected 54367 reflections integrated by profile and summation methods
Combined 1127 partial reflections with other partial reflections
Removed 20 reflections below partiality threshold
Removed 0 intensity.sum.value reflections with I/Sig(I) &lt; -5
Removed 14 intensity.prf.value reflections with I/Sig(I) &lt; -5
Filtering reflections for dataset 1
Read 75607 predicted reflections
Selected 54845 reflections integrated by profile and summation methods
Combined 1284 partial reflections with other partial reflections
Removed 50 reflections below partiality threshold
Removed 0 intensity.sum.value reflections with I/Sig(I) &lt; -5
Removed 14 intensity.prf.value reflections with I/Sig(I) &lt; -5
Filtering reflections for dataset 2
Read 77983 predicted reflections
Selected 54461 reflections integrated by profile and summation methods
Combined 1404 partial reflections with other partial reflections
Removed 38 reflections below partiality threshold
Removed 0 intensity.sum.value reflections with I/Sig(I) &lt; -5
Removed 8 intensity.prf.value reflections with I/Sig(I) &lt; -5
Filtering reflections for dataset 3
Read 76468 predicted reflections
Selected 53877 reflections integrated by profile and summation methods
Combined 1062 partial reflections with other partial reflections
Removed 8 reflections below partiality threshold
Removed 0 intensity.sum.value reflections with I/Sig(I) &lt; -5
Removed 5 intensity.prf.value reflections with I/Sig(I) &lt; -5
Patterson group: P 4/m m m

--------------------------------------------------------------------------------

Normalising intensities for dataset 1

ML estimate of overall B value:
   13.52 A**2
ML estimate of  -log of scale factor:
  -3.04

--------------------------------------------------------------------------------

Normalising intensities for dataset 2

ML estimate of overall B value:
   11.06 A**2
ML estimate of  -log of scale factor:
  -3.50

--------------------------------------------------------------------------------

Normalising intensities for dataset 3

ML estimate of overall B value:
   11.38 A**2
ML estimate of  -log of scale factor:
  -2.96

--------------------------------------------------------------------------------

Normalising intensities for dataset 4

ML estimate of overall B value:
   12.14 A**2
ML estimate of  -log of scale factor:
  -2.67

--------------------------------------------------------------------------------

Estimation of resolution for Laue group analysis

Removing 3 Wilson outliers with E^2 &gt;= 16.0
Resolution estimate from &lt;I&gt;/&lt;σ(I)&gt; &gt; 4.0 : 2.16
Resolution estimate from CC½ &gt; 0.60: 1.80
High resolution limit set to: 1.80
Selecting 148799 reflections with d &gt; 1.80
================================================================================

Automatic determination of number of dimensions for analysis
+--------------+--------------+
|   Dimensions |   Functional |
|--------------+--------------|
|            1 |      14.7478 |
|            2 |      15.8545 |
|            3 |      14.5975 |
|            4 |      14.9222 |
|            5 |      15.3241 |
|            6 |      14.8896 |
|            7 |      15.2194 |
|            8 |      14.8325 |
+--------------+--------------+
Best number of dimensions: 7
Using 7 dimensions for analysis
Principal component analysis:
Explained variance: 0.0065, 0.0052, 0.0043, 0.0042, 0.0039, 0.0036, 2.8e-05
Explained variance ratio: 0.23, 0.19, 0.15, 0.15, 0.14, 0.13, 0.001
Scoring individual symmetry elements
+--------------+--------+------+-----+-----------------+
|   likelihood |   Z-CC |   CC |     | Operator        |
|--------------+--------+------+-----+-----------------|
|        0.933 |   9.69 | 0.97 | *** | 4 |(0, 0, 1)    |
|        0.934 |   9.7  | 0.97 | *** | 4^-1 |(0, 0, 1) |
|        0.934 |   9.7  | 0.97 | *** | 2 |(1, 0, 0)    |
|        0.932 |   9.68 | 0.97 | *** | 2 |(0, 1, 0)    |
|        0.936 |   9.74 | 0.97 | *** | 2 |(0, 0, 1)    |
|        0.936 |   9.74 | 0.97 | *** | 2 |(1, 1, 0)    |
|        0.934 |   9.7  | 0.97 | *** | 2 |(-1, 1, 0)   |
+--------------+--------+------+-----+-----------------+
Scoring all possible sub-groups
+-------------------+-----+--------------+----------+--------+--------+---------+--------------------+
| Patterson group   |     |   Likelihood |   NetZcc |   Zcc+ |   Zcc- |   delta | Reindex operator   |
|-------------------+-----+--------------+----------+--------+--------+---------+--------------------|
| P 4/m m m         | *** |            1 |     9.71 |   9.71 |   0    |       0 | -a,-b,c            |
| C m m m           |     |            0 |     0.03 |   9.72 |   9.69 |       0 | a+b,-a+b,c         |
| P 4/m             |     |            0 |     0.01 |   9.71 |   9.7  |       0 | -a,-b,c            |
| P m m m           |     |            0 |    -0    |   9.71 |   9.71 |       0 | -a,-b,c            |
| P 1 2/m 1         |     |            0 |     0.04 |   9.74 |   9.7  |       0 | -a,-c,-b           |
| C 1 2/m 1         |     |            0 |     0.04 |   9.74 |   9.7  |       0 | a-b,a+b,c          |
| P 1 2/m 1         |     |            0 |    -0    |   9.7  |   9.71 |       0 | -b,-a,-c           |
| C 1 2/m 1         |     |            0 |    -0.01 |   9.7  |   9.71 |       0 | a+b,-a+b,c         |
| P 1 2/m 1         |     |            0 |    -0.04 |   9.68 |   9.71 |       0 | -a,-b,c            |
| P -1              |     |            0 |    -9.71 |   0    |   9.71 |       0 | -a,-b,c            |
+-------------------+-----+--------------+----------+--------+--------+---------+--------------------+
Best solution: P 4/m m m
Unit cell: 68.360, 68.360, 103.953, 90.000, 90.000, 90.000
Reindex operator: -a,-b,c
Laue group probability: 1.000
Laue group confidence: 1.000
Reindexing operators:
x,y,z: [0, 1, 2, 3]
Writing html report to: dials.cosym.html
Writing json to: dials.cosym.json
Saving reindexed experiments to symmetrized.expt
Saving reindexed reflections to symmetrized.refl
</pre></div>
</div>
</div>
</section>
<section id="full-parameter-definitions">
<h2>Full parameter definitions<a class="headerlink" href="#full-parameter-definitions" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">partiality_threshold</span> <span class="o">=</span> <span class="mf">0.4</span>
  <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;Use reflections with a partiality above the threshold.&quot;</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">unit_cell_clustering</span> <span class="p">{</span>
  <span class="n">threshold</span> <span class="o">=</span> <span class="mi">5000</span>
    <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;Threshold value for the clustering&quot;</span>
    <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
  <span class="n">log</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;Display the dendrogram with a log scale&quot;</span>
    <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">bool</span>
<span class="p">}</span>
<span class="n">reference</span> <span class="o">=</span> <span class="kc">None</span>
  <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;A file containing a reference set of intensities e.g. MTZ/cif, or a&quot;</span>
          <span class="s2">&quot;file from which a reference set of intensities can be calculated&quot;</span>
          <span class="s2">&quot;e.g. .pdb or .cif . The space group of the reference file will be&quot;</span>
          <span class="s2">&quot;used and if an indexing ambiguity is present, the input data will&quot;</span>
          <span class="s2">&quot;be reindexed to be consistent with the indexing mode of this&quot;</span>
          <span class="s2">&quot;reference file.&quot;</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">path</span>
  <span class="o">.</span><span class="n">expert_level</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">reference_model</span> <span class="p">{</span>
<span class="p">}</span>
<span class="n">normalisation</span> <span class="o">=</span> <span class="n">kernel</span> <span class="n">quasi</span> <span class="o">*</span><span class="n">ml_iso</span> <span class="n">ml_aniso</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">choice</span>
<span class="n">d_min</span> <span class="o">=</span> <span class="n">Auto</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">min_i_mean_over_sigma_mean</span> <span class="o">=</span> <span class="mi">4</span>
  <span class="o">.</span><span class="n">short_caption</span> <span class="o">=</span> <span class="s2">&quot;Minimum &lt;I&gt;/&lt;σ&gt;&quot;</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">min_cc_half</span> <span class="o">=</span> <span class="mf">0.6</span>
  <span class="o">.</span><span class="n">short_caption</span> <span class="o">=</span> <span class="s2">&quot;Minimum CC½&quot;</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">value_max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">lattice_group</span> <span class="o">=</span> <span class="kc">None</span>
  <span class="o">.</span><span class="n">short_caption</span> <span class="o">=</span> <span class="s2">&quot;Lattice group&quot;</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">space_group</span>
<span class="n">space_group</span> <span class="o">=</span> <span class="kc">None</span>
  <span class="o">.</span><span class="n">short_caption</span> <span class="o">=</span> <span class="s2">&quot;Space group&quot;</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">space_group</span>
<span class="n">lattice_symmetry_max_delta</span> <span class="o">=</span> <span class="mf">5.0</span>
  <span class="o">.</span><span class="n">short_caption</span> <span class="o">=</span> <span class="s2">&quot;Lattice symmetry max δ&quot;</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">best_monoclinic_beta</span> <span class="o">=</span> <span class="kc">True</span>
  <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;If True, then for monoclinic centered cells, I2 will be preferred&quot;</span>
          <span class="s2">&quot;over C2 if it gives a less oblique cell (i.e. smaller beta angle).&quot;</span>
  <span class="o">.</span><span class="n">short_caption</span> <span class="o">=</span> <span class="s2">&quot;Best monoclinic β&quot;</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">bool</span>
<span class="n">dimensions</span> <span class="o">=</span> <span class="n">Auto</span>
  <span class="o">.</span><span class="n">short_caption</span> <span class="o">=</span> <span class="n">Dimensions</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value_min</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">use_curvatures</span> <span class="o">=</span> <span class="kc">True</span>
  <span class="o">.</span><span class="n">short_caption</span> <span class="o">=</span> <span class="s2">&quot;Use curvatures&quot;</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">bool</span>
<span class="n">weights</span> <span class="o">=</span> <span class="n">count</span> <span class="n">standard_error</span>
  <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;If not None, a weights matrix is used in the cosym procedure.&quot;</span>
          <span class="s2">&quot;weights=count uses the number of reflections used to calculate a&quot;</span>
          <span class="s2">&quot;pairwise correlation coefficient as its weight&quot;</span>
          <span class="s2">&quot;weights=standard_error uses the reciprocal of the standard error as&quot;</span>
          <span class="s2">&quot;the weight. The standard error is given by the sqrt of&quot;</span>
          <span class="s2">&quot;(1-CC*2)/(n-2), where (n-2) are the degrees of freedom in a&quot;</span>
          <span class="s2">&quot;pairwise CC calculation.&quot;</span>
  <span class="o">.</span><span class="n">short_caption</span> <span class="o">=</span> <span class="n">Weights</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">choice</span>
<span class="n">cc_weights</span> <span class="o">=</span> <span class="kc">None</span> <span class="n">sigma</span>
  <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;If not None, a weighted cc-half formula is used for calculating&quot;</span>
          <span class="s2">&quot;pairwise correlation coefficients and degrees of freedom in the&quot;</span>
          <span class="s2">&quot;cosym procedure. weights=sigma uses the intensity uncertainties to&quot;</span>
          <span class="s2">&quot;perform inverse variance weighting during the cc calculation.&quot;</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">choice</span>
<span class="n">min_pairs</span> <span class="o">=</span> <span class="mi">3</span>
  <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;Minimum number of pairs for inclusion of correlation coefficient in&quot;</span>
          <span class="s2">&quot;calculation of Rij matrix.&quot;</span>
  <span class="o">.</span><span class="n">short_caption</span> <span class="o">=</span> <span class="s2">&quot;Minimum number of pairs&quot;</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value_min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">minimization</span>
  <span class="o">.</span><span class="n">short_caption</span> <span class="o">=</span> <span class="n">Minimization</span>
<span class="p">{</span>
  <span class="n">engine</span> <span class="o">=</span> <span class="o">*</span><span class="n">scitbx</span> <span class="n">scipy</span>
    <span class="o">.</span><span class="n">short_caption</span> <span class="o">=</span> <span class="n">Engine</span>
    <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">choice</span>
  <span class="n">max_iterations</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="o">.</span><span class="n">short_caption</span> <span class="o">=</span> <span class="s2">&quot;Maximum number of iterations&quot;</span>
    <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
  <span class="n">max_calls</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">.</span><span class="n">short_caption</span> <span class="o">=</span> <span class="s2">&quot;Maximum number of calls&quot;</span>
    <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">nproc</span> <span class="o">=</span> <span class="n">Auto</span>
  <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;Number of processes&quot;</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value_min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">relative_length_tolerance</span> <span class="o">=</span> <span class="mf">0.05</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">absolute_angle_tolerance</span> <span class="o">=</span> <span class="mi">2</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">min_reflections</span> <span class="o">=</span> <span class="mi">10</span>
  <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;The minimum number of reflections per experiment.&quot;</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value_min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">seed</span> <span class="o">=</span> <span class="mi">230</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">output</span> <span class="p">{</span>
  <span class="n">suffix</span> <span class="o">=</span> <span class="s2">&quot;_reindexed&quot;</span>
    <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">str</span>
  <span class="n">log</span> <span class="o">=</span> <span class="n">dials</span><span class="o">.</span><span class="n">cosym</span><span class="o">.</span><span class="n">log</span>
    <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">str</span>
  <span class="n">experiments</span> <span class="o">=</span> <span class="s2">&quot;symmetrized.expt&quot;</span>
    <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">path</span>
  <span class="n">reflections</span> <span class="o">=</span> <span class="s2">&quot;symmetrized.refl&quot;</span>
    <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">path</span>
  <span class="n">json</span> <span class="o">=</span> <span class="n">dials</span><span class="o">.</span><span class="n">cosym</span><span class="o">.</span><span class="n">json</span>
    <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">path</span>
  <span class="n">html</span> <span class="o">=</span> <span class="n">dials</span><span class="o">.</span><span class="n">cosym</span><span class="o">.</span><span class="n">html</span>
    <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">path</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><!--<h3>Navigation</h3>-->
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../howto.html">How-to</a></li>
<li class="toctree-l1"><a class="reference external" href="https://dials.github.io/kb">Knowledge Base</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../workshops/index.html">Workshops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../projects.html">Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer container">
  <a href="https://www.diamond.ac.uk/"><img class="logofooter" alt="Diamond" src="../../_static/diamond_logo.png" /></a>
  <a href="https://www.ccp4.ac.uk/"><img class="logofooter" alt="CCP4" src="../../_static/CCP4-logo-plain.png" /></a>
  <a href="https://www.stfc.ac.uk/"><img class="logofooter" alt="STFC" src="https://dials.github.io/images/logos/ukri-stfc.png" /></a>
  <a href="https://www.lbl.gov/"><img class="logofooter" alt="LBL" src="https://dials.github.io/images/logos/lbl.png" /></a>
  <a href="http://smb.slac.stanford.edu/"><img class="logofooter" alt="SSRL/SMB" src="https://dials.github.io/images/logos/smbssrl.jpg" /></a>
  </div>

  <script type="text/javascript">
     $(document).ready(function() {
         $(".toggle > *").hide();
         $(".toggle .header").show();
         $(".toggle .header").click(function() {
             $(this).parent().children().not(".header").toggle(400);
             $(this).parent().children(".header").toggleClass("open");
         })
     });
  </script>
  
    <div class="footer">
      &#169;2024, Diamond Light Source, Lawrence Berkeley National Laboratory and STFC.
      
    </div>

    

    

  </body>
</html>