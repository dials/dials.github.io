

<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>dials.algorithms.scaling &#8212; DIALS  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" href="../../../_static/dials-styles.css" type="text/css" />
    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="icon" href="../../../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../../../about.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="dials.algorithms.spot_finding" href="dials.algorithms.spot_finding.html" />
    <link rel="prev" title="dials.algorithms.refinement" href="dials.algorithms.refinement.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="logoheader container">
  <a href="../../../index.html">
  <img class="logoheader" alt="DIALS" src="../../../_static/dials_header.png" />
  </a>
  </div>
  

  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-dials.algorithms.scaling">
<span id="dials-algorithms-scaling"></span><h1>dials.algorithms.scaling<a class="headerlink" href="#module-dials.algorithms.scaling" title="Link to this heading">¶</a></h1>
<p>This module provides datastructures and algorithms for scaling.</p>
<section id="module-dials.algorithms.scaling.model.model">
<span id="model-model"></span><h2>model.model<a class="headerlink" href="#module-dials.algorithms.scaling.model.model" title="Link to this heading">¶</a></h2>
<p>Definitions of scaling models.</p>
<p>A scaling model is a collection of scaling model components with appropriate
methods to define how these are composed into one model.</p>
<dl class="py class">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ArrayScalingModel">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dials.algorithms.scaling.model.model.</span></span><span class="sig-name descname"><span class="pre">ArrayScalingModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameters_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configdict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_scaled</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ArrayScalingModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ArrayScalingModel" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dials.algorithms.scaling.model.model.ScalingModelBase" title="dials.algorithms.scaling.model.model.ScalingModelBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalingModelBase</span></code></a></p>
<p>A scaling model for an array-based parameterisation.</p>
<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ArrayScalingModel.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameters_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configdict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_scaled</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ArrayScalingModel.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ArrayScalingModel.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Create the array scaling model components.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ArrayScalingModel.configure_components">
<span class="sig-name descname"><span class="pre">configure_components</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reflection_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ArrayScalingModel.configure_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ArrayScalingModel.configure_components" title="Link to this definition">¶</a></dt>
<dd><p>Add the required reflection table data to the model components.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ArrayScalingModel.consecutive_refinement_order">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">consecutive_refinement_order</span></span><a class="headerlink" href="#dials.algorithms.scaling.model.model.ArrayScalingModel.consecutive_refinement_order" title="Link to this definition">¶</a></dt>
<dd><p>a nested list of component names to indicate scaling order.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ArrayScalingModel.from_data">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reflection_table</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ArrayScalingModel.from_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ArrayScalingModel.from_data" title="Link to this definition">¶</a></dt>
<dd><p>create an array-based scaling model.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ArrayScalingModel.from_dict">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ArrayScalingModel.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ArrayScalingModel.from_dict" title="Link to this definition">¶</a></dt>
<dd><p>Create an <a class="reference internal" href="#dials.algorithms.scaling.model.model.ArrayScalingModel" title="dials.algorithms.scaling.model.model.ArrayScalingModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ArrayScalingModel</span></code></a> from a dictionary.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ArrayScalingModel.id_">
<span class="sig-name descname"><span class="pre">id_</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'array'</span></em><a class="headerlink" href="#dials.algorithms.scaling.model.model.ArrayScalingModel.id_" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ArrayScalingModel.limit_image_range">
<span class="sig-name descname"><span class="pre">limit_image_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_image_range</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ArrayScalingModel.limit_image_range"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ArrayScalingModel.limit_image_range" title="Link to this definition">¶</a></dt>
<dd><p>Modify the model to be suitable for a reduced image range.</p>
<p>For this model, this involves determining whether the number of parameters
should be reduced and may reduce the number of parameters in the absorption
and decay components.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>new_image_range</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a>) – The (start, end) of the new image range.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ArrayScalingModel.phil_scope">
<span class="sig-name descname"><span class="pre">phil_scope</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;libtbx.phil.scope</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#dials.algorithms.scaling.model.model.ArrayScalingModel.phil_scope" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ArrayScalingModel.plot_model_components">
<span class="sig-name descname"><span class="pre">plot_model_components</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reflection_table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ArrayScalingModel.plot_model_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ArrayScalingModel.plot_model_components" title="Link to this definition">¶</a></dt>
<dd><p>Return a dict of plots for plotting model components with plotly.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ArrayScalingModel.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ArrayScalingModel.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ArrayScalingModel.update" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.DoseDecay">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dials.algorithms.scaling.model.model.</span></span><span class="sig-name descname"><span class="pre">DoseDecay</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameters_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configdict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_scaled</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#DoseDecay"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.DoseDecay" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dials.algorithms.scaling.model.model.ScalingModelBase" title="dials.algorithms.scaling.model.model.ScalingModelBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalingModelBase</span></code></a></p>
<p>A model similar to the physical model, where an exponential decay
component is used plus a relative B-factor per sweep, with no absorption
surface by default. Most suitable for multi-crystal datasets.</p>
<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.DoseDecay.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameters_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configdict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_scaled</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#DoseDecay.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.DoseDecay.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Create the physical scaling model components.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.DoseDecay.configure_components">
<span class="sig-name descname"><span class="pre">configure_components</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reflection_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#DoseDecay.configure_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.DoseDecay.configure_components" title="Link to this definition">¶</a></dt>
<dd><p>Add the required reflection table data to the model components.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.DoseDecay.consecutive_refinement_order">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">consecutive_refinement_order</span></span><a class="headerlink" href="#dials.algorithms.scaling.model.model.DoseDecay.consecutive_refinement_order" title="Link to this definition">¶</a></dt>
<dd><p>a nested list of component names to indicate scaling order.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.DoseDecay.fix_initial_parameter">
<span class="sig-name descname"><span class="pre">fix_initial_parameter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#DoseDecay.fix_initial_parameter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.DoseDecay.fix_initial_parameter" title="Link to this definition">¶</a></dt>
<dd><p>Fix a parameter of the scaling model.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.DoseDecay.from_data">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reflection_table</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#DoseDecay.from_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.DoseDecay.from_data" title="Link to this definition">¶</a></dt>
<dd><p>Create the scaling model defined by the params.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.DoseDecay.from_dict">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#DoseDecay.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.DoseDecay.from_dict" title="Link to this definition">¶</a></dt>
<dd><p>Create a <code class="xref py py-obj docutils literal notranslate"><span class="pre">DoseDecayScalingModel</span></code> from a dictionary.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.DoseDecay.get_shared_components">
<span class="sig-name descname"><span class="pre">get_shared_components</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#DoseDecay.get_shared_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.DoseDecay.get_shared_components" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.DoseDecay.id_">
<span class="sig-name descname"><span class="pre">id_</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'dose_decay'</span></em><a class="headerlink" href="#dials.algorithms.scaling.model.model.DoseDecay.id_" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.DoseDecay.limit_image_range">
<span class="sig-name descname"><span class="pre">limit_image_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_image_range</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#DoseDecay.limit_image_range"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.DoseDecay.limit_image_range" title="Link to this definition">¶</a></dt>
<dd><p>Modify the model to be suitable for a reduced image range.</p>
<p>For this model, this involves determining whether the number of parameters
should be reduced and may reduce the number of parameters in the scale and
decay components.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>new_image_range</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a>) – The (start, end) of the new image range.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.DoseDecay.phil_scope">
<span class="sig-name descname"><span class="pre">phil_scope</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;libtbx.phil.scope</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#dials.algorithms.scaling.model.model.DoseDecay.phil_scope" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.DoseDecay.plot_model_components">
<span class="sig-name descname"><span class="pre">plot_model_components</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reflection_table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#DoseDecay.plot_model_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.DoseDecay.plot_model_components" title="Link to this definition">¶</a></dt>
<dd><p>Return a dict of plots for plotting model components with plotly.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.DoseDecay.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#DoseDecay.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.DoseDecay.update" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.KBScalingModel">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dials.algorithms.scaling.model.model.</span></span><span class="sig-name descname"><span class="pre">KBScalingModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameters_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configdict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_scaled</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#KBScalingModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.KBScalingModel" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dials.algorithms.scaling.model.model.ScalingModelBase" title="dials.algorithms.scaling.model.model.ScalingModelBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalingModelBase</span></code></a></p>
<p>A scaling model for a KB parameterisation.</p>
<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.KBScalingModel.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameters_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configdict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_scaled</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#KBScalingModel.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.KBScalingModel.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Create the KB scaling model components.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.KBScalingModel.configure_components">
<span class="sig-name descname"><span class="pre">configure_components</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reflection_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#KBScalingModel.configure_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.KBScalingModel.configure_components" title="Link to this definition">¶</a></dt>
<dd><p>Add the required reflection table data to the model components.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.KBScalingModel.consecutive_refinement_order">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">consecutive_refinement_order</span></span><a class="headerlink" href="#dials.algorithms.scaling.model.model.KBScalingModel.consecutive_refinement_order" title="Link to this definition">¶</a></dt>
<dd><p>a nested list of component names to indicate scaling order.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.KBScalingModel.from_data">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reflection_table</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#KBScalingModel.from_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.KBScalingModel.from_data" title="Link to this definition">¶</a></dt>
<dd><p>Create the <a class="reference internal" href="#dials.algorithms.scaling.model.model.KBScalingModel" title="dials.algorithms.scaling.model.model.KBScalingModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">KBScalingModel</span></code></a> from data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.KBScalingModel.from_dict">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#KBScalingModel.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.KBScalingModel.from_dict" title="Link to this definition">¶</a></dt>
<dd><p>Create an <a class="reference internal" href="#dials.algorithms.scaling.model.model.KBScalingModel" title="dials.algorithms.scaling.model.model.KBScalingModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">KBScalingModel</span></code></a> from a dictionary.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.KBScalingModel.id_">
<span class="sig-name descname"><span class="pre">id_</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'KB'</span></em><a class="headerlink" href="#dials.algorithms.scaling.model.model.KBScalingModel.id_" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.KBScalingModel.phil_scope">
<span class="sig-name descname"><span class="pre">phil_scope</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;libtbx.phil.scope</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#dials.algorithms.scaling.model.model.KBScalingModel.phil_scope" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.KBScalingModel.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#KBScalingModel.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.KBScalingModel.update" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.PhysicalScalingModel">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dials.algorithms.scaling.model.model.</span></span><span class="sig-name descname"><span class="pre">PhysicalScalingModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameters_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configdict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_scaled</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#PhysicalScalingModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.PhysicalScalingModel" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dials.algorithms.scaling.model.model.ScalingModelBase" title="dials.algorithms.scaling.model.model.ScalingModelBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalingModelBase</span></code></a></p>
<p>A scaling model for a physical parameterisation.</p>
<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.PhysicalScalingModel.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameters_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configdict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_scaled</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#PhysicalScalingModel.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.PhysicalScalingModel.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Create the physical scaling model components.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.PhysicalScalingModel.configure_components">
<span class="sig-name descname"><span class="pre">configure_components</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reflection_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#PhysicalScalingModel.configure_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.PhysicalScalingModel.configure_components" title="Link to this definition">¶</a></dt>
<dd><p>Add the required reflection table data to the model components.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.PhysicalScalingModel.consecutive_refinement_order">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">consecutive_refinement_order</span></span><a class="headerlink" href="#dials.algorithms.scaling.model.model.PhysicalScalingModel.consecutive_refinement_order" title="Link to this definition">¶</a></dt>
<dd><p>a nested list of component names to indicate scaling order.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.PhysicalScalingModel.fix_initial_parameter">
<span class="sig-name descname"><span class="pre">fix_initial_parameter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#PhysicalScalingModel.fix_initial_parameter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.PhysicalScalingModel.fix_initial_parameter" title="Link to this definition">¶</a></dt>
<dd><p>Fix a parameter of the scaling model.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.PhysicalScalingModel.from_data">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reflection_table</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#PhysicalScalingModel.from_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.PhysicalScalingModel.from_data" title="Link to this definition">¶</a></dt>
<dd><p>Create the scaling model defined by the params.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.PhysicalScalingModel.from_dict">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#PhysicalScalingModel.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.PhysicalScalingModel.from_dict" title="Link to this definition">¶</a></dt>
<dd><p>Create a <a class="reference internal" href="#dials.algorithms.scaling.model.model.PhysicalScalingModel" title="dials.algorithms.scaling.model.model.PhysicalScalingModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PhysicalScalingModel</span></code></a> from a dictionary.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.PhysicalScalingModel.get_shared_components">
<span class="sig-name descname"><span class="pre">get_shared_components</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#PhysicalScalingModel.get_shared_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.PhysicalScalingModel.get_shared_components" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.PhysicalScalingModel.id_">
<span class="sig-name descname"><span class="pre">id_</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'physical'</span></em><a class="headerlink" href="#dials.algorithms.scaling.model.model.PhysicalScalingModel.id_" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.PhysicalScalingModel.limit_image_range">
<span class="sig-name descname"><span class="pre">limit_image_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_image_range</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#PhysicalScalingModel.limit_image_range"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.PhysicalScalingModel.limit_image_range" title="Link to this definition">¶</a></dt>
<dd><p>Modify the model to be suitable for a reduced image range.</p>
<p>For this model, this involves determining whether the number of parameters
should be reduced and may reduce the number of parameters in the scale and
decay components.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>new_image_range</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a>) – The (start, end) of the new image range.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.PhysicalScalingModel.phil_scope">
<span class="sig-name descname"><span class="pre">phil_scope</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;libtbx.phil.scope</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#dials.algorithms.scaling.model.model.PhysicalScalingModel.phil_scope" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.PhysicalScalingModel.plot_model_components">
<span class="sig-name descname"><span class="pre">plot_model_components</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reflection_table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#PhysicalScalingModel.plot_model_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.PhysicalScalingModel.plot_model_components" title="Link to this definition">¶</a></dt>
<dd><p>Return a dict of plots for plotting model components with plotly.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.PhysicalScalingModel.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#PhysicalScalingModel.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.PhysicalScalingModel.update" title="Link to this definition">¶</a></dt>
<dd><p>Update the model if new options chosen in the phil scope.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dials.algorithms.scaling.model.model.</span></span><span class="sig-name descname"><span class="pre">ScalingModelBase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configdict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_scaled</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ScalingModelBase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Abstract base class for scaling models.</p>
<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configdict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_scaled</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ScalingModelBase.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Initialise the model with no components and a <a class="reference internal" href="#dials.algorithms.scaling.model.model.ScalingModelBase.configdict" title="dials.algorithms.scaling.model.model.ScalingModelBase.configdict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">configdict</span></code></a>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.components">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">components</span></span><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.components" title="Link to this definition">¶</a></dt>
<dd><p>a dictionary of the model components.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.configdict">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">configdict</span></span><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.configdict" title="Link to this definition">¶</a></dt>
<dd><p>a dictionary of the model configuration parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.configure_components">
<span class="sig-name descname"><span class="pre">configure_components</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reflection_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ScalingModelBase.configure_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.configure_components" title="Link to this definition">¶</a></dt>
<dd><p>Add the required reflection table data to the model components.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.consecutive_refinement_order">
<span class="sig-name descname"><span class="pre">consecutive_refinement_order</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ScalingModelBase.consecutive_refinement_order"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.consecutive_refinement_order" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a>: a nested list of component names.</p>
<p>This list indicates to the scaler the order to perform scaling in
consecutive scaling mode.
e.g. [[‘scale’, ‘decay’], [‘absorption’]] would cause the first cycle to
refine scale and decay, and then absorption in a subsequent cycle.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.error_model">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">error_model</span></span><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.error_model" title="Link to this definition">¶</a></dt>
<dd><p>The error model associated with the scaling model.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#dials.algorithms.scaling.model.model.ScalingModelBase.error_model" title="dials.algorithms.scaling.model.model.ScalingModelBase.error_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">error_model</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.fix_initial_parameter">
<span class="sig-name descname"><span class="pre">fix_initial_parameter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ScalingModelBase.fix_initial_parameter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.fix_initial_parameter" title="Link to this definition">¶</a></dt>
<dd><p>Fix a parameter of the scaling model.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.fixed_components">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fixed_components</span></span><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.fixed_components" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.from_data">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reflection_table</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ScalingModelBase.from_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.from_data" title="Link to this definition">¶</a></dt>
<dd><p>Create the model from input data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.from_dict">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ScalingModelBase.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.from_dict" title="Link to this definition">¶</a></dt>
<dd><p>Create a scaling model from a dictionary.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.get_shared_components">
<span class="sig-name descname"><span class="pre">get_shared_components</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ScalingModelBase.get_shared_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.get_shared_components" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.id_">
<span class="sig-name descname"><span class="pre">id_</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.id_" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.is_scaled">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_scaled</span></span><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.is_scaled" title="Link to this definition">¶</a></dt>
<dd><p>Indicate whether this model has previously been refined.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.limit_image_range">
<span class="sig-name descname"><span class="pre">limit_image_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_image_range</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ScalingModelBase.limit_image_range"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.limit_image_range" title="Link to this definition">¶</a></dt>
<dd><p>Modify the model if necessary due to reducing the image range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>new_image_range</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a>) – The (start, end) of the new image range.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.load_error_model">
<span class="sig-name descname"><span class="pre">load_error_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">error_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ScalingModelBase.load_error_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.load_error_model" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.n_params">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">n_params</span></span><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.n_params" title="Link to this definition">¶</a></dt>
<dd><p>a dictionary of the model components.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.plot_model_components">
<span class="sig-name descname"><span class="pre">plot_model_components</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reflection_table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ScalingModelBase.plot_model_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.plot_model_components" title="Link to this definition">¶</a></dt>
<dd><p>Return a dict of plots for plotting model components with plotly.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.record_intensity_combination_Imid">
<span class="sig-name descname"><span class="pre">record_intensity_combination_Imid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Imid</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ScalingModelBase.record_intensity_combination_Imid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.record_intensity_combination_Imid" title="Link to this definition">¶</a></dt>
<dd><p>Record the intensity combination Imid value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.set_error_model">
<span class="sig-name descname"><span class="pre">set_error_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">error_model</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ScalingModelBase.set_error_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.set_error_model" title="Link to this definition">¶</a></dt>
<dd><p>Associate an error model with the dataset.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.set_scaling_model_as_scaled">
<span class="sig-name descname"><span class="pre">set_scaling_model_as_scaled</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ScalingModelBase.set_scaling_model_as_scaled"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.set_scaling_model_as_scaled" title="Link to this definition">¶</a></dt>
<dd><p>Set the boolean ‘is_scaled’ flag as True.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.set_scaling_model_as_unscaled">
<span class="sig-name descname"><span class="pre">set_scaling_model_as_unscaled</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ScalingModelBase.set_scaling_model_as_unscaled"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.set_scaling_model_as_unscaled" title="Link to this definition">¶</a></dt>
<dd><p>Set the boolean ‘is_scaled’ flag as False.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.set_valid_image_range">
<span class="sig-name descname"><span class="pre">set_valid_image_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_range</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ScalingModelBase.set_valid_image_range"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.set_valid_image_range" title="Link to this definition">¶</a></dt>
<dd><p>Set the valid image range for the model in the <a class="reference internal" href="#dials.algorithms.scaling.model.model.ScalingModelBase.configdict" title="dials.algorithms.scaling.model.model.ScalingModelBase.configdict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">configdict</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ScalingModelBase.to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.to_dict" title="Link to this definition">¶</a></dt>
<dd><p>Serialize the model to a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A dictionary representation of the model.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.ScalingModelBase.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#ScalingModelBase.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.ScalingModelBase.update" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.calc_n_param_from_bins">
<span class="sig-prename descclassname"><span class="pre">dials.algorithms.scaling.model.model.</span></span><span class="sig-name descname"><span class="pre">calc_n_param_from_bins</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value_min</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_bins</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#calc_n_param_from_bins"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.calc_n_param_from_bins" title="Link to this definition">¶</a></dt>
<dd><p>Return the correct number of bins for initialising the gaussian
smoothers.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.calculate_new_offset">
<span class="sig-prename descclassname"><span class="pre">dials.algorithms.scaling.model.model.</span></span><span class="sig-name descname"><span class="pre">calculate_new_offset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_image_0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_image_0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_norm_fac</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_old_param</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_new_param</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#calculate_new_offset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.calculate_new_offset" title="Link to this definition">¶</a></dt>
<dd><p>Calculate the parameter offset for the new image range.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>An offset to apply when selecting the new parameters from the</dt><dd><p>existing parameters.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.determine_auto_absorption_params">
<span class="sig-prename descclassname"><span class="pre">dials.algorithms.scaling.model.model.</span></span><span class="sig-name descname"><span class="pre">determine_auto_absorption_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">absorption</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#determine_auto_absorption_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.determine_auto_absorption_params" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.initialise_smooth_input">
<span class="sig-prename descclassname"><span class="pre">dials.algorithms.scaling.model.model.</span></span><span class="sig-name descname"><span class="pre">initialise_smooth_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">osc_range</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">one_osc_width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interval</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#initialise_smooth_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.initialise_smooth_input" title="Link to this definition">¶</a></dt>
<dd><p>Calculate the required smoother parameters.</p>
<p>Using information about the sequence and the chosen parameterisation
interval, the required parameters for the smoother are determined.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>osc_range</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a>) – The (start, stop) of an oscillation in degrees.</p></li>
<li><p><strong>one_osc_width</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – The oscillation width of a single image in degrees.</p></li>
<li><p><strong>interval</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – The required maximum separation between parameters
in degrees.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>3-element tuple containing;</dt><dd><p>n_params (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></a>): The number of parameters to use.
norm_fac (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code></a>): The degrees to parameters space normalisation factor.
interval (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code></a>): The actual interval in degrees between the parameters.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)">tuple</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.make_combined_plots">
<span class="sig-prename descclassname"><span class="pre">dials.algorithms.scaling.model.model.</span></span><span class="sig-name descname"><span class="pre">make_combined_plots</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#make_combined_plots"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.make_combined_plots" title="Link to this definition">¶</a></dt>
<dd><p>Make any plots that require evaluation of all models.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dials.algorithms.scaling.model.model.plot_scaling_models">
<span class="sig-prename descclassname"><span class="pre">dials.algorithms.scaling.model.model.</span></span><span class="sig-name descname"><span class="pre">plot_scaling_models</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reflection_table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/model/model.html#plot_scaling_models"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.model.model.plot_scaling_models" title="Link to this definition">¶</a></dt>
<dd><p>Return a dict of component plots for the model for plotting with plotly.</p>
</dd></dl>

</section>
<section id="module-dials.algorithms.scaling.outlier_rejection">
<span id="outlier-rejection"></span><h2>outlier_rejection<a class="headerlink" href="#module-dials.algorithms.scaling.outlier_rejection" title="Link to this heading">¶</a></h2>
<p>Definitions of outlier rejection algorithms.</p>
<p>These algorithms use the Ih_table datastructures to perform calculations
in groups of symmetry equivalent reflections. Two functions are provided,
reject_outliers, to reject outlier and set flags given a reflection table
and experiment object, and determine_outlier_index_arrays, which takes an
Ih_table and returns flex.size_t index arrays of the outlier positions.</p>
<dl class="py class">
<dt class="sig sig-object py" id="dials.algorithms.scaling.outlier_rejection.NormDevOutlierRejection">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dials.algorithms.scaling.outlier_rejection.</span></span><span class="sig-name descname"><span class="pre">NormDevOutlierRejection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Ih_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zmax</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/outlier_rejection.html#NormDevOutlierRejection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.outlier_rejection.NormDevOutlierRejection" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dials.algorithms.scaling.outlier_rejection.OutlierRejectionBase" title="dials.algorithms.scaling.outlier_rejection.OutlierRejectionBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">OutlierRejectionBase</span></code></a></p>
<p>Algorithm using normalised deviations from the weighted intensity means.</p>
<p>In this case, the weighted mean is calculated from all reflections in
the symmetry group excluding the test reflection.</p>
<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.outlier_rejection.NormDevOutlierRejection.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Ih_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zmax</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/outlier_rejection.html#NormDevOutlierRejection.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.outlier_rejection.NormDevOutlierRejection.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Set up and run the outlier rejection algorithm.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dials.algorithms.scaling.outlier_rejection.OutlierRejectionBase">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dials.algorithms.scaling.outlier_rejection.</span></span><span class="sig-name descname"><span class="pre">OutlierRejectionBase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Ih_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zmax</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/outlier_rejection.html#OutlierRejectionBase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.outlier_rejection.OutlierRejectionBase" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Base class for outlier rejection algorithms using an IhTable datastructure.</p>
<p>Subclasses must implement the _do_outlier_rejection method, which must
add the indices of outliers to the _outlier_indices attribute. The algorithms
are run upon initialisation and result in the population of the
<a class="reference internal" href="#dials.algorithms.scaling.outlier_rejection.OutlierRejectionBase.final_outlier_arrays" title="dials.algorithms.scaling.outlier_rejection.OutlierRejectionBase.final_outlier_arrays"><code class="xref py py-obj docutils literal notranslate"><span class="pre">final_outlier_arrays</span></code></a>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="dials.algorithms.scaling.outlier_rejection.OutlierRejectionBase.final_outlier_arrays">
<span class="sig-name descname"><span class="pre">final_outlier_arrays</span></span><a class="headerlink" href="#dials.algorithms.scaling.outlier_rejection.OutlierRejectionBase.final_outlier_arrays" title="Link to this definition">¶</a></dt>
<dd><p>A list of flex.size_t arrays of outlier
indices w.r.t. the order of the initial reflection tables used to
create the Ih_table.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.outlier_rejection.OutlierRejectionBase.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Ih_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zmax</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/outlier_rejection.html#OutlierRejectionBase.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.outlier_rejection.OutlierRejectionBase.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Set up and run the outlier rejection algorithm.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.outlier_rejection.OutlierRejectionBase.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/outlier_rejection.html#OutlierRejectionBase.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.outlier_rejection.OutlierRejectionBase.run" title="Link to this definition">¶</a></dt>
<dd><p>Run the outlier rejection algorithm, implemented by a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dials.algorithms.scaling.outlier_rejection.SimpleNormDevOutlierRejection">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dials.algorithms.scaling.outlier_rejection.</span></span><span class="sig-name descname"><span class="pre">SimpleNormDevOutlierRejection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Ih_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zmax</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/outlier_rejection.html#SimpleNormDevOutlierRejection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.outlier_rejection.SimpleNormDevOutlierRejection" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dials.algorithms.scaling.outlier_rejection.OutlierRejectionBase" title="dials.algorithms.scaling.outlier_rejection.OutlierRejectionBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">OutlierRejectionBase</span></code></a></p>
<p>Algorithm using normalised deviations from the weighted intensity means.</p>
<p>In this case, the weighted mean is calculated from all reflections in
the symmetry group excluding the test reflection.</p>
<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.outlier_rejection.SimpleNormDevOutlierRejection.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Ih_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zmax</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/outlier_rejection.html#SimpleNormDevOutlierRejection.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.outlier_rejection.SimpleNormDevOutlierRejection.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Set up and run the outlier rejection algorithm.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dials.algorithms.scaling.outlier_rejection.TargetedOutlierRejection">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dials.algorithms.scaling.outlier_rejection.</span></span><span class="sig-name descname"><span class="pre">TargetedOutlierRejection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Ih_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zmax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/outlier_rejection.html#TargetedOutlierRejection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.outlier_rejection.TargetedOutlierRejection" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dials.algorithms.scaling.outlier_rejection.OutlierRejectionBase" title="dials.algorithms.scaling.outlier_rejection.OutlierRejectionBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">OutlierRejectionBase</span></code></a></p>
<p>Implementation of an outlier rejection algorithm against a target.</p>
<p>This algorithm requires a target Ih_table in addition to an Ih_table
for the dataset under investigation. Normalised deviations are
calculated from the intensity values in the target table.</p>
<dl class="py method">
<dt class="sig sig-object py" id="dials.algorithms.scaling.outlier_rejection.TargetedOutlierRejection.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Ih_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zmax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/outlier_rejection.html#TargetedOutlierRejection.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.outlier_rejection.TargetedOutlierRejection.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Set a target Ih_table and run the outlier rejection.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dials.algorithms.scaling.outlier_rejection.determine_Esq_outlier_index_arrays">
<span class="sig-prename descclassname"><span class="pre">dials.algorithms.scaling.outlier_rejection.</span></span><span class="sig-name descname"><span class="pre">determine_Esq_outlier_index_arrays</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Ih_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">emax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/outlier_rejection.html#determine_Esq_outlier_index_arrays"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.outlier_rejection.determine_Esq_outlier_index_arrays" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dials.algorithms.scaling.outlier_rejection.determine_outlier_index_arrays">
<span class="sig-prename descclassname"><span class="pre">dials.algorithms.scaling.outlier_rejection.</span></span><span class="sig-name descname"><span class="pre">determine_outlier_index_arrays</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Ih_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'standard'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/outlier_rejection.html#determine_outlier_index_arrays"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.outlier_rejection.determine_outlier_index_arrays" title="Link to this definition">¶</a></dt>
<dd><p>Run an outlier algorithm and return the outlier indices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Ih_table</strong> – A dials.algorithms.scaling.Ih_table.IhTable.</p></li>
<li><p><strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Name (alias) of outlier rejection algorithm to use. If
method=target, then the optional argument target must also
be specified. Implemented methods; standard, simple, target.</p></li>
<li><p><strong>zmax</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – Normalised deviation threshold for classifying an outlier.</p></li>
<li><p><strong>target</strong> (<em>Optional</em><em>[</em><em>IhTable</em><em>]</em>) – An IhTable to use to obtain target Ih for
outlier rejectiob, if method=target.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>A list of flex.size_t arrays, with one</dt><dd><p>array per dataset that was used to create the Ih_table. Importantly,
the indices are the indices of the reflections in the initial
reflection table used to create the Ih_table, not the indices of the
data in the Ih_table.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>outlier_index_arrays (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>)</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.13)"><strong>ValueError</strong></a> – if an invalid choice is made for the method.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dials.algorithms.scaling.outlier_rejection.reject_outliers">
<span class="sig-prename descclassname"><span class="pre">dials.algorithms.scaling.outlier_rejection.</span></span><span class="sig-name descname"><span class="pre">reject_outliers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reflection_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'standard'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/scaling/outlier_rejection.html#reject_outliers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dials.algorithms.scaling.outlier_rejection.reject_outliers" title="Link to this definition">¶</a></dt>
<dd><p>Run an outlier algorithm on symmetry-equivalent intensities.</p>
<p>This method runs an intensity-based outlier rejection algorithm, comparing
the deviations from the weighted mean in groups of symmetry equivalent
reflections. The outliers are determined and the outlier_in_scaling flag
is set in the reflection table.</p>
<p>The values intensity and variance must be set in the reflection table;
these should be corrected but unscaled values, as an inverse_scale_factor
will be applied during outlier rejection if this is present in the reflection
table. The reflection table should also be prefiltered (e.g. not-integrated
reflections should not be present) as no further filtering is done on the
input table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reflection_table</strong> – A reflection table.</p></li>
<li><p><strong>experiment</strong> – A single experiment object.</p></li>
<li><p><strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Name (alias) of outlier rejection algorithm to use.</p></li>
<li><p><strong>zmax</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – Normalised deviation threshold for classifying an outlier.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The input table with the outlier_in_scaling flag set.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>reflection_table</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper"><!--<h3>Navigation</h3>-->
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto.html">How-to</a></li>
<li class="toctree-l1"><a class="reference external" href="https://dials.github.io/kb">Knowledge Base</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../workshops/index.html">Workshops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../national_resource.html">US National Resource</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../projects.html">Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../license.html">License</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer container">
  <a href="https://www.diamond.ac.uk/"><img class="logofooter" alt="Diamond" src="../../../_static/diamond_logo.png" /></a>
  <a href="https://www.ccp4.ac.uk/"><img class="logofooter" alt="CCP4" src="../../../_static/CCP4-logo-plain.png" /></a>
  <a href="https://www.stfc.ac.uk/"><img class="logofooter" alt="STFC" src="https://dials.github.io/images/logos/ukri-stfc.png" /></a>
  <a href="https://www.lbl.gov/"><img class="logofooter" alt="LBL" src="https://dials.github.io/images/logos/lbl.png" /></a>
  <a href="http://smb.slac.stanford.edu/"><img class="logofooter" alt="SSRL/SMB" src="https://dials.github.io/images/logos/smbssrl.jpg" /></a>
  </div>

  <script type="text/javascript">
     $(document).ready(function() {
         $(".toggle > *").hide();
         $(".toggle .header").show();
         $(".toggle .header").click(function() {
             $(this).parent().children().not(".header").toggle(400);
             $(this).parent().children(".header").toggleClass("open");
         })
     });
  </script>
  
    <div class="footer">
      &#169;2025, Diamond Light Source, Lawrence Berkeley National Laboratory and STFC.
      
    </div>

    

    

  </body>
</html>